{"version":3,"sources":["main.js"],"names":["document","paperSizes","B1","B2","C2","A3plus","A3","A4","d","getElementById","canvas","minMargin","paperWidthInput","addEventListener","e","paperSize","target","value","console","log","join","changeHtml","printWidthInput","printWidth","printHeightInput","printHeight","printRunInput","printRun","drawOnCanvas","p_s","calcItems","innerHTML","s","Math","ceil","pixelRatio","window","devicePixelRatio","paperW","paperH","printW","printH","w","floor","h","ctx","getContext","width","height","style","strokeStyle","strokeWeight","setTransform","y","x","strokeRect"],"mappings":"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","file":"main.1f19ae8e.js","sourceRoot":"../src","sourcesContent":["(function(document) {\n    const paperSizes = {\n        B1: [1000, 700],\n        B2: [700, 500],\n        C2: [640, 460],\n        A3plus: [450, 320],\n        A3: [420, 297],\n        A4: [297, 210]\n    }\n    const d = document.getElementById('output');\n    const canvas = document.getElementById('output_canvas');\n    const minMargin = 10 * 2;\n\n    let paperWidthInput = document.getElementById('paperSize');\n    paperWidthInput.addEventListener('change', (e) => {\n        paperSize = paperSizes[e.target.value];\n        console.log(`Paper size: ${paperSize.join(', ')}`);\n        changeHtml();\n    });\n    let printWidthInput = document.getElementById('printWidth');\n    printWidthInput.addEventListener('change', (e) => {\n        printWidth = e.target.value;\n        changeHtml();\n    });\n    let printHeightInput = document.getElementById('printHeight');\n    printHeightInput.addEventListener('change', (e) => {\n        printHeight = e.target.value;\n        changeHtml();\n    });\n    let printRunInput = document.getElementById('printRun');\n    printRunInput.addEventListener('change', (e) => {\n        printRun = e.target.value;\n        changeHtml();\n    });\n\n    let paperSize = paperSizes.B2;\n    let printWidth = printWidthInput.value;\n    let printHeight = printHeightInput.value;\n    let printRun = 1;\n\n    function changeHtml(){\n        drawOnCanvas();\n        let p_s = calcItems();\n        d.innerHTML = `Pieces/sheet: ${p_s} <br>`;\n        let s = Math.ceil(printRun/(p_s));\n        d.innerHTML += `You need ${s} ${s == 1 ? 'sheet' : 'sheets'}`;\n    }\n\n    function drawOnCanvas(){\n        let pixelRatio = window.devicePixelRatio\n        const paperW = paperSize[0] * pixelRatio\n        const paperH = paperSize[1] * pixelRatio\n        const printW = printWidth * pixelRatio\n        const printH = printHeight * pixelRatio\n\n        let w = Math.floor((paperW-minMargin)/printW);\n        let h = Math.floor((paperH-minMargin)/printH);\n        const ctx = canvas.getContext('2d');\n        canvas.width = paperW;\n        canvas.height = paperH;\n        canvas.style.width = `${paperW/pixelRatio}px`;\n        canvas.style.height = `${paperH/pixelRatio}px`;\n        ctx.strokeStyle = '#000000';\n        ctx.strokeWeight= pixelRatio;\n        ctx.setTransform(1, 0, 0, 1, (paperW-printW*w)/2, (paperH-printH*h)/2);\n        for(let y = 0; y < h; y++){\n            for(let x = 0; x < w; x++){\n                ctx.strokeRect(x * printW, y * printH, printW, printH);\n            }\n        }\n      }\n\n    function calcItems(){\n        let w = Math.floor((paperSize[0]-minMargin)/printWidth);\n        let h = Math.floor((paperSize[1]-minMargin)/printHeight);\n        return w * h;\n    }\n\n    changeHtml();\n\n})(document);"]}